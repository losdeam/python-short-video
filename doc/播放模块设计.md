- 流程图
### 整体
![](https://cdn.nlark.com/yuque/0/2023/jpeg/40362764/1698735795291-81ea39b8-0c2a-405f-9541-ffd35e030873.jpeg)
### 推荐系统：
![](https://cdn.nlark.com/yuque/0/2023/jpeg/40362764/1699357430934-abd189e5-f8f9-4b75-89b8-a129167d9b9f.jpeg)
## 设计思路：

1. 用户在请求播放视频时，前端将返回用户的id给后端
2. 后端接收到用户id后通过数据库来获取用户的视频标签预测模型，与视频预测模型
3. 通过预测得到的标签来获取对应标签的视频列表
4. 通过视频预测模型对获取的视频列表中的视频进行预测，获取得分列表
5. 将视频得分列表以一定权重的热度评分相加得到最终的得分
6. 将得分最高的视频地址传递给前端，前端通过视频地址来访问七牛云对象储存容器中的视频，并传递给用户端
#### 推荐系统分析：

1. 考虑到用户喜好可能会发生实时的变化且每个用户都需要个性化定制，所以每个用户都需要要有自己的推荐模型，且模型需要经常更新训练
2. 考虑到性能与空间的需求，模型文件不能太大否则拖慢训练，影响用户的使用。本项目使用了拆分的方式来降低单个模型的大小，以提高效率
3. 将推荐分为三个部分：1. 分区推荐 2. 分区内tag推荐 3. 视频本身推荐 
4. 使用surprise库来进行视频的推荐，但是需要提供对应项目的得分。那么推荐系统的中心就转向了如何对项目进行评分。
5. 由于视频本体的流动性太强，记分较为困难且数量较大，效果不佳。所以在视频本身推荐方面使用热度统计的方式。取同tag中热度最高的未看视频的前3名进行预读。
6. 分区推荐与分区内tag推荐则由surprise库构建svd模型来实现。同时每当用户浏览了视频后，记录用户对该视频的状态（看完，点赞，收藏），当记录15个视频后作为一个批次来对模型进行训练。
7. 冷启动问题则通过获取按热度排序的视频列表来解决

由于时间问题，推荐系统暂时使用带权重的随机数生成器代替。由用户的浏览来对权重进行更新。


